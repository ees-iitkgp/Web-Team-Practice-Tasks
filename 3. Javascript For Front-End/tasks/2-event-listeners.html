<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title> Task 2: Event Listeners </title>
	<style>
		body {
			height: 100vh;
			background-repeat: no-repeat;
			background-image: linear-gradient(-45deg, #9cdcec, #9cb4ec, #ac9cec, #d49cec, #ec9cdc);
		}
		#to-do {
			display: flex;
			flex-direction: column;
			align-items: center;
		}
		#task-add-container {
			margin: 20px;
		}
		#to-do-list {
			width: 70%;
			padding: 30px;
			border: 2px solid black;
			border-radius: 12px;
			background-color: rgba(65, 65, 65, 0.226);
			margin: 10px;
		}
		.to-do-item {
			display: flex;
			flex-direction: row;
			align-items: center;
			justify-content: space-between;
			padding: 10px;
			border: black 1px solid;
			border-radius: 6px;
			margin: 10px
		}
		button {
			font-size: 14px;
			padding: 10px;
			border-radius: 6px;
			border: 1px solid black;
		}
		input {
			height: 32px;
			width: 350px;
		}
	</style>
	<script>
		/* Eventlisteners over on-event functions: 
			Enter why you think one of them is better over the other.
		*/
		window.addEventListener('load', () => {
			/* 
			Task:
			Define the functions of each interactible field as per the given instructions.
				a. The Task Input field should add the text (if any) in it to the to-do list on clicking "Enter" while typing.
				b. The "Add Task" button must do the same as above.
				c. On clicking the "Check" button, the span contaiing the task text will have a class 
				`checked` added/removed as per the original condition.
				d. On clicking the "Delete" button, the to-do item will be removed from the list.
				e. On clicking "Export", the whole To-Do list will be copied to the clipboard. Each item will be separated by a newline.
				Note: If a task is completed, it will be enclosed between two tilde (~). For Example: ~~Bully Goose for Work~~
			*/
		const taskInput = document.getElementById('task-input');
		const addTaskButton = document.getElementById('add-task');
		const toDoList = document.getElementById('to-do-list');
		const exportButton = document.getElementById('export');

		function addTask() {
			const taskText = taskInput.value.trim();
			if (taskText !== '') {
				const taskItem = document.createElement('div');
				taskItem.className = 'to-do-item';
				taskItem.innerHTML = `
					<span class="task-text">${taskText}</span>
					<div class="buttons">
						<button class="check-item-button">Check</button>
						<button class="delet-item-button">Delete</button>
					</div>
				`;
				toDoList.appendChild(taskItem);
				taskInput.value = '';
			}
		}

		taskInput.addEventListener('keypress', (event) => {
			if (event.key === 'Enter') {
				addTask();
			}
		});

		addTaskButton.addEventListener('click', addTask);

		toDoList.addEventListener('click', (event) => {
			if (event.target.classList.contains('check-item-button')) {
				const taskText = event.target.closest('.to-do-item').querySelector('.task-text');
				taskText.classList.toggle('checked');
			} else if (event.target.classList.contains('delet-item-button')) {
				const taskItem = event.target.closest('.to-do-item');
				toDoList.removeChild(taskItem);
			}
		});

		exportButton.addEventListener('click', () => {
			let tasks = '';
			document.querySelectorAll('.to-do-item').forEach(item => {
				const taskText = item.querySelector('.task-text').textContent;
				if (item.querySelector('.task-text').classList.contains('checked')) {
					tasks += `~~${taskText}~~\n`;
				} else {
					tasks += `${taskText}\n`;
				}
			});
			navigator.clipboard.writeText(tasks.trim());
		});
		});
	</script>
</head>
<style>
	.checked {
		text-decoration: line-through;
		opacity: 0.5;
	}
</style>
<body>
	<div id="root">
		<!-- Task 1 HTML -->
		<div id="to-do">
			<div id="task-add-container">
				<input type="text" placeholder="Enter a Task" id="task-input">
				<button id="add-task"> Add Task </button>
			</div>
			<div id="to-do-list">
				<div class="to-do-item">
					<span class="task-text"> Finish Javascript Tasks </span>
					<div class="buttons">
						<button class="check-item-button"> Check  </button>
						<button class="delet-item-button"> Delete </button>
					</div>
				</div>
				<div class="to-do-item">
					<span class="task-text"> Finish React Tutorials </span>
					<div class="buttons">
						<button class="check-item-button"> Check  </button>
						<button class="delet-item-button"> Delete </button>
					</div>
				</div>
				<div class="to-do-item">
					<span class="task-text"> Get Treat from Ankan </span>
					<div class="buttons">
						<button class="check-item-button"> Check  </button>
						<button class="delet-item-button"> Delete </button>
					</div>
				</div>
			</div>
			<button id="export"> Export List </button>
		</div>
	</div>
</body>
</html>
